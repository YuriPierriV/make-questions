<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Sometype+Mono:wght@400;500&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        
        
        <link rel="shortcut icon" href="/static/img/logo.png" type="image/x-icon">
        <link rel="stylesheet" href="/static/creation.css">
        <title>Criação Formulário</title>
    </head>
<body>
    <header class="nav-color">
        <div class="container ">
            <nav class="nav d-flex justify-content-between p-3">
                <ul class="nav justify-content-start align-items-center">
                    <li class="nav-brand nav-item pe-3 ">
                        <a href="/"><i class="bi bi-house-down text-gray " style="font-size: 30px;"></i></a>
                    </li>
                    <li class="nav-item">
                        <input class="inputTitulo input-clean text-gray" type="text" id="nameInput" value="{{ form.nome }}" style="font-size: 25px; width: 100%;" required>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-gray" href="#"><i class="bi bi-star" style="font-size: 18px;"></i></a>
                    </li>
                </ul>
                <ul class="nav justify-content-end align-items-center ">
                    <li class="nav-item">
                        <a class="nav-link text-gray" href="#"><i class="bi bi-palette"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-gray" href="#"><i class="bi bi-eye"></i></a>
                    </li>
                    <li class="nav-item pe-5">
                        <a class="nav-link text-gray" href="#"><i class="bi bi-gear"></i></a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link text-gray" href="#">{{usuario.nome}} <img src="/static/img/user_noimage.jpg" alt="" class="img-fluid rounded-circle img-perfil " height="25px" width="25px"></a>
                    </li>
                </ul>
            </nav>
            
        </div>
    </header>
    <main>
        <div class="container-fluid p-5">
            <div class="row">
                <div class="col-md-3">
                    <div class="card card-header p-3 gap-2">
                        <input class="inputTitulo input-clean text-gray" type="text" id="tituloInput" value="{{ form.titulo }}" style="font-size: 32px; width: 100%;" required>
                        <input class="inputTitulo input-clean text-gray" type="text" id="descricaoInput" value="{{ form.descricao }}" style="font-size: 18px; width: 100%;" required>
                    </div>
                </div>
                <div class="col-md-7">
                    {% for question in questions %}
                    <div class="card mb-4" id="questions">
                        <div class="card-header card-controle p-4 " id="question_controle_{{question.id}}">
                            <div class="mb-3">
                                <textarea rows="1" class="inputTextquestion w-100 input-clean text-gray {{question.type}}" type="text" id="question_text_{{question.id}}" required>{{ question.text }}</textarea>
                            </div>
                            {% if question.type == 'text' %}
                                <div class="question_text">
                                    <div class="mb-3">
                                        <textarea rows="1" class="inputTextanswer w-100 input-clean text-gray {{question.type}}" type="text" id="answer_text_{{question.id}}" required>{{ question.pre_answer }}</textarea>
                                    </div>
                                </div>
                            {% endif %}
                            {% if question.type == 'multimult_escolha' %}
                                <div class="question_multi border_box">
                                    <div class="container border_box">
                                        <form class="border_box">
                                            {% for option in question.options %}
                                                    <label class="border_box">
                                                        <input class="border_box geral" type="radio" name="radio" checked>
                                                        <span class="border_box inputOption editable" id="edit_option_{{option.id}}_question_{{question.id}}">{{option.option_text}}</span>
                                                    </label>
                                            {% endfor %}
                                            <label class="border_box">
                                                <input class="border_box geral" type="radio" name="radio" checked class="border_box"/>
                                                <span class="border_box inputOption editable add_option" id="add_option_{{question.id}}">Adicionar uma opção...</span>
                                            </label>
                                        </form>
                                    </div>
                                </div>
                            {% endif %}
                            
                        </div>
                        <div class="card-body card-controle" id="question_edit_{{question.id}}">
                            <div class="container question-edit ps-0">
                                <div class="row">
                                    <div class="col">
                                        <select class="form-select question_type" id="question_type_{{question.id}}" aria-label="Default select example">
                                            <option class="option-menu question_type_option" id="question_type_{{question.id}}_text" value="texto">Texto</option>
                                            <option class="option-menu question_type_option" id="question_type_{{question.id}}_multi" value="mult_escolha">Múltipla Escolha</option>
                                        </select>
                                    </div>
                                    <div class="col">
                                        <button class="btn btn-outline-dark">
                                            <i class="bi bi-plus-lg"></i>
                                        </button>
                                        <button class="btn btn-outline-dark ms-3" onclick="deletarQuestao({{question.id}})">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                        <button class="btn btn-outline-dark ms-3" id="required_{{question.id}}">
                                            <i class="bi bi-file-earmark-lock2"> Obrigatório</i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>   
                    </div>
                    {% endfor %}
                    <div style="text-align: center;" class="pt-3">
                        <hr class="w-75 me-auto ms-auto mt-4 mb-1">
                        <button class="btn btn-outline-dark botao_plus" id="add_question" onclick="adicionarQuestao()" style="position: relative; top: -25px;">
                            <i class="bi bi-plus-lg add_question" ></i>
                        </button>
                    </div>
                    
                    
                </div>
                <div class="col-md-2">
                    <div class="card card-header p-3 ">
                        <H4>Questões</H4>
                        <div class="row ">
                            {% set count = namespace(value=1) %}
                            {% for question in questions %}
                                <div class="col-md-2  mt-2 d-flex justify-content-center ">
                                    <div class="card card-header p-3 text-center contador d-flex justify-content-center align-items-center" id="card_lateral_{{question.id}}">
                                        <p>{{ count.value }}</p>
                                    </div>
                                </div>
                                {% set count.value = count.value + 1 %}
                            {% endfor %}
                        </div>
                        
                    </div>
                </div>
            </div>
            
        </div>
        
    </main>
    

    <!-- Entire bundle -->
    <script>
        var id_form = {{form.id}};
        var questions = {{ questions_json | tojson | safe }};
    </script>
    <script src="/static/creation.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@shopify/draggable@1.0.0-beta.11/lib/draggable.bundle.js"></script>
</body>
</html>